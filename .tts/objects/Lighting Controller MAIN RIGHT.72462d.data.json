{
  "GUID": "72462d",
  "Name": "Custom_Assetbundle",
  "Transform": {
    "posX": -16.3,
    "posY": 47.56,
    "posZ": -38.82638,
    "rotX": 1.01777751e-13,
    "rotY": 90.0088,
    "rotZ": -0.00000241812086,
    "scaleX": 1,
    "scaleY": 1,
    "scaleZ": 1
  },
  "Nickname": "Lighting Controller MAIN RIGHT",
  "Description": "700be8",
  "GMNotes": "",
  "AltLookAngle": {
    "x": 0,
    "y": 0,
    "z": 0
  },
  "ColorDiffuse": {
    "r": 0,
    "g": 0,
    "b": 0,
    "a": 0
  },
  "LayoutGroupSortIndex": 0,
  "Value": 0,
  "Locked": true,
  "Grid": true,
  "Snap": true,
  "IgnoreFoW": false,
  "MeasureMovement": false,
  "DragSelectable": true,
  "Autoraise": true,
  "Sticky": true,
  "Tooltip": true,
  "GridProjection": false,
  "HideWhenFaceDown": false,
  "Hands": false,
  "CustomAssetbundle": {
    "AssetbundleURL": "https://steamusercontent-a.akamaihd.net/ugc/1667980476488958970/7DCC15B647A803B7A67A129FD882BA69CA7E2AFE/",
    "AssetbundleSecondaryURL": "",
    "MaterialIndex": 0,
    "TypeIndex": 0,
    "LoopingEffectIndex": 0
  },
  "LuaScript": "local row_labels = {\"Color\", \"Range\", \"Angle\", \"Intensity\"}\r\nlocal label_z = {-1.05, -1.13, -1.09, -1.34}\r\n\r\nfunction onLoad(save_state)\r\n\tself.createInput({\r\n\t\tinput_function = \"guid_input_func\",\r\n\t\tfunction_owner = self,\r\n\t\tlabel = \"GUID\",\r\n\t\tposition = {-0.02, 0, 0.15},\r\n\t\trotation = {0, 90, 0},\r\n\t\tscale = {0.4, 0.4, 0.4},\r\n\t\twidth = 1400,\r\n\t\theight = 400,\r\n\t\tfont_size = 377,\r\n\t\tcolor = {0.7573, 0.7573, 0.7573, 1},\r\n\t\talignment = 3,\r\n\t\tvalidation = 4\r\n\t})\r\n\tfor i = 1, 4 do\r\n\t\tself.createButton({\r\n\t\t\tclick_function = \"none\",\r\n\t\t\tfunction_owner = self,\r\n\t\t\tlabel = row_labels[i],\r\n\t\t\tposition = {0.13 - i * 0.5, 0, label_z[i]},\r\n\t\t\trotation = {0, 90, 0},\r\n\t\t\tscale = {0.5, 0.5, 0.5},\r\n\t\t\twidth = 0,\r\n\t\t\theight = 0,\r\n\t\t\tfont_size = 377,\r\n\t\t\tfont_color = {0.85, 0.85, 0.85, 1}\r\n\t\t})\r\n\tend\r\n\tfor i = 2, 4 do\r\n\t\tself.createInput({\r\n\t\t\tinput_function = row_labels[i] .. \"_input_func\",\r\n\t\t\tfunction_owner = self,\r\n\t\t\tlabel = row_labels[i],\r\n\t\t\tposition = {0.13 - i * 0.5, 0, 0.49},\r\n\t\t\trotation = {0, 90, 0},\r\n\t\t\tscale = {0.4, 0.4, 0.4},\r\n\t\t\twidth = 1000,\r\n\t\t\theight = 250,\r\n\t\t\tfont_size = 227,\r\n\t\t\tcolor = {0.7573, 0.7573, 0.7573, 1},\r\n\t\t\talignment = 3,\r\n\t\t\tvalidation = 3\r\n\t\t})\r\n\t\tself.createButton({\r\n\t\t\tclick_function = row_labels[i] .. \"0.5_click_func\",\r\n\t\t\tfunction_owner = self,\r\n\t\t\tlabel = \"0.5x\",\r\n\t\t\tposition = {0.13 - i * 0.5, 0, -0.38},\r\n\t\t\trotation = {0, 90, 0},\r\n\t\t\tscale = {0.5, 0.5, 0.5},\r\n\t\t\twidth = 300,\r\n\t\t\theight = 300,\r\n\t\t\tfont_size = 130,\r\n\t\t\tcolor = {0.7573, 0.7573, 0.7573, 1}\r\n\t\t})\r\n\t\tself.createButton({\r\n\t\t\tclick_function = row_labels[i] .. \"0.9_click_func\",\r\n\t\t\tfunction_owner = self,\r\n\t\t\tlabel = \"0.9x\",\r\n\t\t\tposition = {0.13 - i * 0.5, 0, -0.09},\r\n\t\t\trotation = {0, 90, 0},\r\n\t\t\tscale = {0.5, 0.5, 0.5},\r\n\t\t\twidth = 300,\r\n\t\t\theight = 300,\r\n\t\t\tfont_size = 130,\r\n\t\t\tcolor = {0.7573, 0.7573, 0.7573, 1}\r\n\t\t})\r\n\t\tself.createButton({\r\n\t\t\tclick_function = row_labels[i] .. \"1.1_click_func\",\r\n\t\t\tfunction_owner = self,\r\n\t\t\tlabel = \"1.1x\",\r\n\t\t\tposition = {0.13 - i * 0.5, 0, 1.08},\r\n\t\t\trotation = {0, 90, 0},\r\n\t\t\tscale = {0.5, 0.5, 0.5},\r\n\t\t\twidth = 300,\r\n\t\t\theight = 300,\r\n\t\t\tfont_size = 130,\r\n\t\t\tcolor = {0.7573, 0.7573, 0.7573, 1}\r\n\t\t})\r\n\t\tself.createButton({\r\n\t\t\tclick_function = row_labels[i] .. \"2_click_func\",\r\n\t\t\tfunction_owner = self,\r\n\t\t\tlabel = \"2x\",\r\n\t\t\tposition = {0.13 - i * 0.5, 0, 1.37},\r\n\t\t\trotation = {0, 90, 0},\r\n\t\t\tscale = {0.5, 0.5, 0.5},\r\n\t\t\twidth = 300,\r\n\t\t\theight = 300,\r\n\t\t\tfont_size = 130,\r\n\t\t\tcolor = {0.7573, 0.7573, 0.7573, 1}\r\n\t\t})\r\n\tend\r\n\tself.createButton({\r\n\t\tclick_function = \"light_click_func\",\r\n\t\tfunction_owner = self,\r\n\t\tlabel = \"Light\",\r\n\t\tposition = {-2.37, 0, -0.31},\r\n\t\trotation = {0, 90, 0},\r\n\t\tscale = {0.5, 0.5, 0.5},\r\n\t\twidth = 900,\r\n\t\theight = 400,\r\n\t\tfont_size = 300,\r\n\t\tcolor = {0.7573, 0.7573, 0.7573, 1}\r\n\t})\r\n\tself.createButton({\r\n\t\tclick_function = \"arrow_click_func\",\r\n\t\tfunction_owner = self,\r\n\t\tlabel = \"Arrow\",\r\n\t\tposition = {-2.37, 0, 0.61},\r\n\t\trotation = {0, 90, 0},\r\n\t\tscale = {0.5, 0.5, 0.5},\r\n\t\twidth = 900,\r\n\t\theight = 400,\r\n\t\tfont_size = 300,\r\n\t\tcolor = {0.7573, 0.7573, 0.7573, 1}\r\n\t})\r\n\tself.createButton({\r\n\t\tclick_function = \"turn_on_all_click_func\",\r\n\t\tfunction_owner = self,\r\n\t\tlabel = \"Show All Arrows\",\r\n\t\tposition = {-3, 0, 0.15},\r\n\t\trotation = {0, 90, 0},\r\n\t\tscale = {0.5, 0.5, 0.5},\r\n\t\twidth = 2300,\r\n\t\theight = 400,\r\n\t\tfont_size = 300,\r\n\t\ttooltip = \"Show the arrow on every spotlight tool in the scene.\",\r\n\t\tcolor = Color.fromString(\"Green\"):lerp(Color.fromString(\"White\"), 0.7),\r\n\t})\r\n\tself.createButton({\r\n\t\tclick_function = \"turn_off_all_click_func\",\r\n\t\tfunction_owner = self,\r\n\t\tlabel = \"Hide All Arrows\",\r\n\t\tposition = {-3.4, 0, 0.15},\r\n\t\trotation = {0, 90, 0},\r\n\t\tscale = {0.5, 0.5, 0.5},\r\n\t\twidth = 2300,\r\n\t\theight = 400,\r\n\t\tfont_size = 300,\r\n\t\ttooltip = \"Hide the arrow on every spotlight tool in the scene.\",\r\n\t\tcolor = Color.fromString(\"Red\"):lerp(Color.fromString(\"White\"), 0.7),\r\n\t})\r\n\tself.createButton({\r\n\t\tclick_function = \"apply_click_func\",\r\n\t\tfunction_owner = self,\r\n\t\tlabel = \"Apply\",\r\n\t\tposition = {-0.35, 0.015, 1.26},\r\n\t\trotation = {0, 90, 0},\r\n\t\tscale = {0.5, 0.5, 0.5},\r\n\t\twidth = 500,\r\n\t\theight = 300,\r\n\t\tfont_size = 130,\r\n\t\tcolor = {0.7573, 0.7573, 0.7573, 1}\r\n\t})\r\n\tself.setColorTint(Color(0, 0, 0, 0))\r\nend\r\n\r\nfunction apply()\r\n\tlocal inputs = self.getInputs()\r\n\tlocal obj = getObjectFromGUID(inputs[1].value)\r\n\tif obj then\r\n\t\tlocal buttons = self.getButtons()\r\n\t\tlocal enabled = \"false\"\r\n\t\tif buttons[17].color == Color.fromString(\"Green\"):lerp(Color.fromString(\"White\"), 0.5) then\r\n\t\t\tenabled = \"true\"\r\n\t\tend\r\n\t\tlocal effect_id = 1\r\n\t\tif buttons[18].color == Color.fromString(\"Green\"):lerp(Color.fromString(\"White\"), 0.5) then\r\n\t\t\teffect_id = 0\r\n\t\tend\r\n\t\tobj.setGMNotes(string.format([[Range: %s\r\nAngle: %s\r\nIntensity: %s\r\nEnabled: %s]], inputs[2].value, inputs[3].value, inputs[4].value, enabled))\r\n\t\tobj.AssetBundle.playLoopingEffect(effect_id)\r\n\t\tobj.setColorTint(self.getColorTint())\r\n\t\tobj.call(\"apply\")\r\n\tend\r\nend\r\n\r\nfunction guid_input_func(obj, color, value, still_editing)\r\n\tif not still_editing then\r\n\t\tlocal obj = getObjectFromGUID(value)\r\n\t\tif obj and obj.getGMNotes() ~= \"\" then\r\n\t\t\tlocal outputs = {}\r\n\t\t\tfor i, line in ipairs(splitLines(obj.getGMNotes())) do\r\n\t\t\t\tlocal st, en, cap = string.find(line, \": (.+)$\")\r\n\t\t\t\toutputs[i] = cap\r\n\t\t\tend\r\n\t\t\toutputs[1] = tonumber(outputs[1])\r\n\t\t\toutputs[2] = tonumber(outputs[2])\r\n\t\t\toutputs[3] = tonumber(outputs[3])\r\n\t\t\tif outputs[4] == \"true\" then\r\n\t\t\t\toutputs[4] = true\r\n\t\t\telse\r\n\t\t\t\toutputs[4] = false\r\n\t\t\tend\r\n\t\t\tfor i = 1, 3 do\r\n\t\t\t\tlocal text = tostring(outputs[i])\r\n\t\t\t\tif text then\r\n\t\t\t\t\tself.editInput({\r\n\t\t\t\t\t\tindex = i,\r\n\t\t\t\t\t\tvalue = text,\r\n\t\t\t\t\t})\r\n\t\t\t\tend\r\n\t\t\tend\r\n\t\t\tself.setColorTint(obj.getColorTint())\r\n\t\t\tif outputs[4] then\r\n\t\t\t\tself.editButton({\r\n\t\t\t\t\tindex = 16,\r\n\t\t\t\t\tcolor = Color.fromString(\"Green\"):lerp(Color.fromString(\"White\"), 0.5)\r\n\t\t\t\t})\r\n\t\t\telse\r\n\t\t\t\tself.editButton({\r\n\t\t\t\t\tindex = 16,\r\n\t\t\t\t\tcolor = Color.fromString(\"Red\"):lerp(Color.fromString(\"White\"), 0.5)\r\n\t\t\t\t})\r\n\t\t\tend\r\n\t\t\tif obj.AssetBundle.getLoopingEffectIndex() == 0 then\r\n\t\t\t\tself.editButton({\r\n\t\t\t\t\tindex = 17,\r\n\t\t\t\t\tcolor = Color.fromString(\"Green\"):lerp(Color.fromString(\"White\"), 0.5)\r\n\t\t\t\t})\r\n\t\t\telse\r\n\t\t\t\tself.editButton({\r\n\t\t\t\t\tindex = 17,\r\n\t\t\t\t\tcolor = Color.fromString(\"Red\"):lerp(Color.fromString(\"White\"), 0.5)\r\n\t\t\t\t})\r\n\t\t\tend\r\n\t\telse\r\n\t\t\tfor i = 1, 3 do\r\n\t\t\t\tself.editInput({\r\n\t\t\t\t\tindex = i,\r\n\t\t\t\t\tvalue = \"\",\r\n\t\t\t\t})\r\n\t\t\tend\r\n\t\t\tself.setColorTint(Color(0, 0, 0, 0))\r\n\t\t\tself.editButton({\r\n\t\t\t\tindex = 16,\r\n\t\t\t\tcolor = Color.fromString(\"Grey\"):lerp(Color.fromString(\"White\"), 0.5)\r\n\t\t\t})\r\n\t\t\tself.editButton({\r\n\t\t\t\tindex = 17,\r\n\t\t\t\tcolor = Color.fromString(\"Grey\"):lerp(Color.fromString(\"White\"), 0.5)\r\n\t\t\t})\r\n\t\tend\r\n\tend\r\nend\r\n\r\nfor i = 2, 4 do\r\n\t_G[row_labels[i] .. \"_input_func\"] = function(obj, color, value, still_editing)\r\n\t\tapply()\r\n\tend\r\n\t_G[row_labels[i] .. \"0.5_click_func\"] = function(obj, color, alt)\r\n\t\tlocal value = tonumber(self.getInputs()[i].value)\r\n\t\tif value then\r\n\t\t\tself.editInput({\r\n\t\t\t\tindex = i - 1,\r\n\t\t\t\tvalue = tostring(value * 0.5),\r\n\t\t\t})\r\n\t\t\tapply()\r\n\t\tend\r\n\tend\r\n\t_G[row_labels[i] .. \"0.9_click_func\"] = function(obj, color, alt)\r\n\t\tlocal value = tonumber(self.getInputs()[i].value)\r\n\t\tif value then\r\n\t\t\tself.editInput({\r\n\t\t\t\tindex = i - 1,\r\n\t\t\t\tvalue = tostring(value * 0.9),\r\n\t\t\t})\r\n\t\t\tapply()\r\n\t\tend\r\n\tend\r\n\t_G[row_labels[i] .. \"1.1_click_func\"] = function(obj, color, alt)\r\n\t\tlocal value = tonumber(self.getInputs()[i].value)\r\n\t\tif value then\r\n\t\t\tself.editInput({\r\n\t\t\t\tindex = i - 1,\r\n\t\t\t\tvalue = tostring(value * 1.1),\r\n\t\t\t})\r\n\t\t\tapply()\r\n\t\tend\r\n\tend\r\n\t_G[row_labels[i] .. \"2_click_func\"] = function(obj, color, alt)\r\n\t\tlocal value = tonumber(self.getInputs()[i].value)\r\n\t\tif value then\r\n\t\t\tself.editInput({\r\n\t\t\t\tindex = i - 1,\r\n\t\t\t\tvalue = tostring(value * 2),\r\n\t\t\t})\r\n\t\t\tapply()\r\n\t\tend\r\n\tend\r\nend\r\n\r\nfunction light_click_func(obj, color, alt)\r\n\tif self.getButtons()[17].color == Color.fromString(\"Green\"):lerp(Color.fromString(\"White\"), 0.5) then\r\n\t\tself.editButton({\r\n\t\t\tindex = 16,\r\n\t\t\tcolor = Color.fromString(\"Red\"):lerp(Color.fromString(\"White\"), 0.5)\r\n\t\t})\r\n\telse\r\n\t\tself.editButton({\r\n\t\t\tindex = 16,\r\n\t\t\tcolor = Color.fromString(\"Green\"):lerp(Color.fromString(\"White\"), 0.5)\r\n\t\t})\r\n\tend\r\n\tapply()\r\nend\r\n\r\nfunction arrow_click_func(obj, color, alt)\r\n\tif self.getButtons()[18].color == Color.fromString(\"Green\"):lerp(Color.fromString(\"White\"), 0.5) then\r\n\t\tself.editButton({\r\n\t\t\tindex = 17,\r\n\t\t\tcolor = Color.fromString(\"Red\"):lerp(Color.fromString(\"White\"), 0.5)\r\n\t\t})\r\n\telse\r\n\t\tself.editButton({\r\n\t\t\tindex = 17,\r\n\t\t\tcolor = Color.fromString(\"Green\"):lerp(Color.fromString(\"White\"), 0.5)\r\n\t\t})\r\n\tend\r\n\tapply()\r\nend\r\n\r\nfunction turn_on_all_click_func(obj, color, alt)\r\n\tfor _, obj in ipairs(getAllObjects()) do\r\n\t\tif obj.getName() == \"Custom Spotlight Tool\" then\r\n\t\t\tobj.AssetBundle.playLoopingEffect(0)\r\n\t\tend\r\n\tend\r\nend\r\n\r\nfunction turn_off_all_click_func(obj, color, alt)\r\n\tfor _, obj in ipairs(getAllObjects()) do\r\n\t\tif obj.getName() == \"Custom Spotlight Tool\" then\r\n\t\t\tobj.AssetBundle.playLoopingEffect(1)\r\n\t\tend\r\n\tend\r\nend\r\n\r\nfunction apply_click_func(obj, color, alt)\r\n\tapply()\r\nend\r\n\r\nfunction splitLines(input)\r\n    local outputs = {}\r\n    for output in input:gmatch(\"[^\\n]+\") do\r\n        table.insert(outputs, output)\r\n    end\r\n    return outputs\r\nend\r\n\r\nfunction none()\r\n\treturn nil\r\nend",
  "LuaScriptState": "",
  "XmlUI": ""
}